<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title> PPOL670 | Introduction to Data Science for Public Policy   Work Flow &amp; Reproducibility       Week 1</title>
    <meta charset="utf-8" />
    <meta name="author" content="  Prof. Eric Dunford  ◆  Georgetown University  ◆  McCourt School of Public Policy  ◆  eric.dunford@georgetown.edu" />
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link rel="stylesheet" href="gu-theme.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# <font class = "title-panel"> PPOL670 | Introduction to Data Science for Public Policy </font> <font size=100, face="bold"> Work Flow &amp; Reproducibility </font> <br> <br> <font size=6, face="bold"> Week 1 </font>
### <font class = "title-footer">  Prof. Eric Dunford  ◆  Georgetown University  ◆  McCourt School of Public Policy  ◆  <a href="mailto:eric.dunford@georgetown.edu" class="email">eric.dunford@georgetown.edu</a></font>

---




layout: true

&lt;div class="slide-footer"&gt;&lt;span&gt; 
PPOL670 | Introduction to Data Science for Public Policy

&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;

Week 1 &lt;!-- Week of the Footer Here --&gt;

&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;

Work Flow &amp; Reproducibility&lt;!-- Title of the lecture here --&gt;

&lt;/span&gt;&lt;/div&gt; 


---

class: outline

# Plan for Today

![:space 5]

- **_Introduce the Course_** and **_Introductions_**

- **_Reproducibility_** 
  
    + what it means
    + how to organize data projects coherently
    + how to build code that you and others can replicate and read

- **_Interacting_** with `R` and `RStudio`
    
---

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
# What is data science?

---

&lt;br&gt;
.center[&lt;img src="figures/data_science.JPG" width="700"&gt;]

---

## The Aim of Data Science 

### Generate

  + **Valid**  
      + &lt;span style="color:#477acc"&gt; scrutiny, discussion &amp; limitations &lt;span&gt;
  + **Unbiased**
      + &lt;span style="color:#477acc"&gt; introspection, diversity &amp; substantive knowledge &lt;span&gt;
  + **Reproducible** 
      + &lt;span style="color:#477acc"&gt; data provenance, code transparency &amp; version control &lt;span&gt;
  + **Compelling** 
      + &lt;span style="color:#477acc"&gt; interpretable, intuitive &amp; clear &lt;span&gt;
  
### insights using data to _influence and inform decision-making_.


---

## This Course focuses on

-  **Tools**: building a fundamental data science toolkit using `R`
    + Become a competent user of `R`
    + Promote self-learning: _don't just pass this course, make this part of your life_.
    + Master the art of managing errors
    
- **Data Management**: getting, tidying, and managing data 
    + Cleaning Dirty Data 
    + Structuring unstructured data types (like text)
    + Scraping 
    + Incorporating a "Never touch the data" philosophy
    
- **Analytic Approaches**: drawing insights
    + Exploring, Modeling, and Prediction

---

## Course Calendar

&lt;center&gt;

&lt;table class="table" style="font-size: 18px; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Week &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Topics &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Work Flow and Reproducibility &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Introduction to Programming in R &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Reproducibility in Practice &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Data Wrangling in R &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Data Visualization &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Web Scrapping and APIs &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Geospatial Data &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Text as Data &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Introduction to Statistical Learning &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Applications in Supervised Learning (Regression) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 11 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Applications in Supervised Learning (Classification) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 12 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Interpretable Machine Learning &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 13 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Applications in Unsupervised Learning &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 14 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Project Presentations &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

**Who is the course for?**

- Anyone who (a) finds this stuff fascinating, (b) wants to understand how to fold data into their decision-making process, and (c) wants to build up their data skills.

- New `R` users; no programming experience assumed.

- This course is a survey of data science approaches using `R`. You'll walk out of this class being able to do a lot, but it is just a starting point. 

--

**What this course is not?**

- CS course on functional programming.

- A machine learning course (we dabble, but don't delve into any one concept in depth).

- A "big data" course: we won't delve into database structures, e.g. SQL and Hadoop, or cloud computing, e.g. Azure and AWS.


---

### Learning Virtually

- This class will meet virtually this semester. 

- Lecture will be divided into **_asynchronous_** and **_synchronous_** components.

--

- **_Asynchronous_** learning
  - Pre-recorded videos covering the main concepts for the week. 
  - Materials will be made available _one week prior_ to the scheduled class on the course website. 
  - Approx. 1 hour of content a week. 
  
--

- **_Synchronous_** learning
  - Meet over zoom at the scheduled class time.
  - Applied walkthroughs/hands-on examples
  - Approx. 1.5 hours a week. 
 
 
---

### Learning from afar?

![:space 5]

- **_All synchronous lectures will be recorded_** and saved to Canvas. 

![:space 2]

- Office hours Tuesdays **_9am to 11am_** (to accommodate different time zones).

![:space 2]

- Communication through **_Slack_** to coordinate with peers/TA/prof.

![:space 2]

- **_"Attendance" == "Watching recordings"_** 


---

class: newsection

# Reproducibility

---

## We focus on things like this...

&lt;!-- &lt;img src="figures/lecture01_ethnic-exposure-boko-haram.png" width="600"&gt; --&gt;

.center[![description of the image](figures/lecture01_gapminder-animation.gif)]

---

## And forget the reality that is this... 

.center[&lt;img src="figures/lecture01_messy-files.png" width="800"&gt;]


---


&lt;br&gt;&lt;br&gt;
### Reproducibility is fundamental to the scientific method, but it is also a &lt;u&gt;practical reality&lt;/u&gt;.

&lt;br&gt;

- juggling multiple versions of the same file

- collaboration can create conflicts across versions

- projects are picked up and put down &amp;rarr; tracing the progression of a project across a spiderweb of files is not always easy (or possible)

- new people enter the fray &amp;rarr; getting them up-to-speed means walking them through the labyrinth, which wastes time and resources.

---

# Generating Reproducible Work

&lt;br&gt;
### 1. Readable

### 2. Portable

### 3. Well-Named

### 4. Repeatable

### 5. Version Control

---

## Readable


```r
x &lt;- rnorm(100)
y &lt;- 1 + 2*x + rnorm(100)
plot(y,x)
```

vs.


```r
# Monte Carlo Simulation of a bivariate linear regression

sample_size &lt;- 100  # simulated sample size

indep_var &lt;- rnorm(sample_size) # independent variable

error     &lt;- rnorm(sample_size) # simulate error

# generate dependent variable as function of the
# independent variable and some error.
dep_var &lt;- 1 + 2*indep_var + error 

# plot values
plot(dep_var,indep_var)
```


???

- Well Commented Code and Functions**
- Well-Named Objects
- Leverage Spacing

To a degree, Code (like writing) should be more Hemmingway than Faulkner: concise,
clear, readable.

---

## Portable

![:space 3] 

- **Project can easily travel across computers**
    - e.g. R Project (`.rproj`), [`packrat`](https://rstudio.github.io/packrat/), and [`renv`](https://rstudio.github.io/renv/articles/renv.html)

--

- **Scripts avoid "machine" specific designations**
    + Avoid **specific file paths**: `/Users/my-user-name/data-projects/my-project`
    + **Retain software and packages versions** (e.g. `R`'s `packrat` package )

--

- **Use text files**
    + Not software dependent (e.g. .docx, .ia); Can open on any system
    + Can be easily searched via the commandline
    + Easy to track changes via version control
    
    
---

# Well-named

![:space 3] 

Maintain **designated folders** for different aspects of the project.

![:space 3]

```bash
data-project
├── raw_data/        # Where our input data lives
├── output_data/     # Where our manipulated data lives
├── R/               # Where our R functions live
├── figures/         # Where our generated figures live
├── reports/         # Where our text-based report output live
└── analysis/        # Where our the code for our analyses live
```

---

# Well-named

**No spaces!**
  + A space between designations can mean many things
  + spaces are ambiguous for the computer

.center[`data analysis 2.Rmd` &lt;br&gt; &amp;darr; &lt;br&gt; `data-analysis-2.Rmd`]

--

**Names that state the purpose of the file** (no matter how long).

.center[`data-analysis-2.Rmd` &lt;br&gt; &amp;darr; &lt;br&gt;`Analysis01_wrangling-census-data-for-visualization_v2.Rmd`]



---

## Repeatable

![:space 3]

- Every step of the **_project expressed as code_**

--

- **_Automate_** what you can

--

- Use **_functions_** to **_repeat common tasks_**

--

- Clearly **_state all dependencies_** (i.e. packages/modules) at the top of every script

```R
# Pacakges at the top
require(tidyverse)
require(sf)

# Then code
...
```

---

## Version Control
&lt;br&gt;

- **Retain a record of all changes** made throughout the project's lifespan

- **Easily handle collaboration**:
    + track who did what
    + uniform method dealing with conflicting changes
    
- **Provides a room for experimentation and non-linear exploration**

- No more **version file names**!

---

class: newsection

# Interacting with `R`

---

# R in a Nut Shell

![:space 5]

`R` is a statistical and graphical programming language that is based off a much older language called `S`. It's source code is written in C, Fortran, and R. And it's completely **free** under a [GNU General Public License](https://en.wikipedia.org/wiki/GNU_General_Public_License0).

--

### What this means for us:
- **No Barriers to Entry** &amp;rarr; easy to acquire, easy to contribute

- **Active Community** &amp;rarr; if you can think it, there is likely a package out there that does it.

- **Powerful and Adaptive** &amp;rarr; build an estimator from scratch, scrape a web-site, automate the coding of a dataset. All is within one's reach.

---

# Why use R?

![:space 5]

`R` offers a powerful way to

![:space 3]

- **analyze** data
- **clean** excel spreadsheets (and any other data format) systematically
- **migrate** projects across platforms
- format and **clean** text
- **manage** _any_ data source
- produce compelling **graphics** and maps

---

# R Studio

![:space 10]

**R Studio** is a graphical user interface (GUI) for the R programming language. The software makes `R` more user-friendly adding some point-and-click functionality along with a complete integration of graphs, the data environment, and the coding script.

--

Think of it like this..
&gt; `R` is the engine that runs all our commands, and R Studio is the leather seats and steering wheel. One does the work, the other eases how that work is done.

---

# Installing R and R Studio

![:space 1]

To install **R**, download R from CRAN via the following:

- Windows: https://cran.r-project.org/bin/windows/base/
- Mac: https://cran.r-project.org/bin/macosx/

To install **R Studio**, download from the following:

- https://www.rstudio.com/products/rstudio/download/

Useful **video tutorials**:

- [Prior TA's walkthrough](https://www.dropbox.com/s/7af77pyb1wh224w/R-startup.mp4?dl=0)
- Rstudio's Walkthrough:
  + [Install R](https://player.vimeo.com/video/203516510)
  + [Install RStudio](https://player.vimeo.com/video/203516968)

---

### Getting Familiar with R Studio

R Studio is broken up into **4 quandrants** that can be  arranged and customized to the users preference.

.center[&lt;img src="Figures/rstudio.png", width=600&gt;]

---

### Getting Familiar with R Studio

.center[&lt;img src="Figures/rstudio_1_4.png", width=700&gt;]

---

### Getting Familiar with R Studio

.center[&lt;img src="Figures/rstudio_2_4.png", width=700&gt;]

---

### Getting Familiar with R Studio

.center[&lt;img src="Figures/rstudio_3_4.png", width=700&gt;]

---

### Getting Familiar with R Studio

.center[&lt;img src="Figures/rstudio_4_4.png", width=700&gt;]

---

# The Console

The console is where all the action happens. This is "`R`".

.center[&lt;img src="Figures/console.png"&gt;]

---

# The Console

All commands are processed through the console directly (that is, one can type commands directly into it) or via a **script**.

.center[&lt;img src="Figures/console_with_calc.png"&gt;]

---

# Scripts

A script is a `.R` text file where we write and run our code.

.center[&lt;img src="Figures/empty_script.png"&gt;]

---

# Scripts

A **RMarkdown** script is a `.Rmd` text file where we write **_prose_** and run our code together (more on this on Week 3).

.center[&lt;img src="Figures/rmarkdown.png"&gt;]

---

# Scripts

When we write a line of code, we can run it in the console by highlighting the text and...
- clicking **`run`**
- pressing **`command + enter`** (mac)
- pressing **`control + enter`** (windows)

.left[&lt;img src="Figures/script_run.png", width=800&gt;]

---

# Scripts

Everything in a script will be treated as **code** -- that is if you run it, the line will be processed through the console.

However, we can leave comments and notes to ourselves by **commenting out** sections of the script using a **`#`**

.left[&lt;img src="Figures/commenting_out.png", width=800&gt;]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"countIncrementalSlides": true,
"highlightLines": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
