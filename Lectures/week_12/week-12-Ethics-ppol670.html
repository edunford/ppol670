<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title> PPOL670 | Introduction to Data Science for Public Policy   Week 12       Ethics</title>
    <meta charset="utf-8" />
    <meta name="author" content="  Prof. Eric Dunford  ◆  Georgetown University  ◆  McCourt School of Public Policy  ◆  eric.dunford@georgetown.edu" />
    <link rel="stylesheet" href="gu-theme.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# <font class = "title-panel"> PPOL670 | Introduction to Data Science for Public Policy </font> <font size=6, face="bold"> Week 12 </font> <br> <br> <font size=100, face="bold"> Ethics </font>
### <font class = "title-footer">  Prof. Eric Dunford  ◆  Georgetown University  ◆  McCourt School of Public Policy  ◆  <a href="mailto:eric.dunford@georgetown.edu" class="email">eric.dunford@georgetown.edu</a></font>

---




layout: true

&lt;div class="slide-footer"&gt;&lt;span&gt; 
PPOL670 | Introduction to Data Science for Public Policy

&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;

Week 12 &lt;!-- Week of the Footer Here --&gt;

&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;

Ethics &lt;!-- Title of the lecture here --&gt;

&lt;/span&gt;&lt;/div&gt; 

---
class: outline

# Outline for Today 

![:space 2]

- Expectations regarding group **projects**

  - Presentations Next Time
  
  - Final reports Due

- A brief jaunt into building **Shiny Applications** and **Dashboards**

- **Ethics in Data Science**

- Ethical issues in practice &amp;rarr;  **case study**

---

class: newsection

# Final Projects 

---

### Project Report

- **_6 - 10 pages_** (double spaced; 12pt Font)

- **_Submit_** as `.pdf` (via CANVAS); hardcopy in person. 

--

- Note that given the page constraints, ![:text_color darkred](all `R` code should _&lt;u&gt;not&lt;/u&gt;_ be visible in the rendered document) 

  - `knitr::opts_chunk$set(echo=FALSE)`
  - Or by chunk, `echo=FALSE`

--

- All figures **_"publishable quality"_**

  - Clear, well thought through: colors, labels, titles/comments, choice of geometric representation, etc.
  
  - Centered, appropriately sized figures
  
---

### Project Report _Components_

- **_Problem Statement and Background_** ![:text_color orangered](&amp;rarr;) Concise statement of problem; background/literature; why should we care. 
  
--

![:space 1]
  
- **_Research Design/Approach_** ![:text_color orangered](&amp;rarr;) how are you exploring the problem; what are the main goals of the analysis (define "success").

--

![:space 1]

- **_Methods &amp; Tools_** ![:text_color orangered](&amp;rarr;) methods/tools your team explored; justify their use; what worked, what didn't.

--

![:space 1]

- **_Results &amp; Discussion_** ![:text_color orangered](&amp;rarr;) detailed (but concise) summary of the results of your work; did you "succeed" given the aims of the project; what are the next steps/avenues for future work.

--

.center[
![:text_color orangered](Use visualizations and tables whenever possible. &lt;br&gt;Include links to applications [if any])
]

---

### Project Report _Code_

- **Appendix** allowed. 

  - Reference to work product and efforts that didn't make it into the main project report (due to space constraints or being a "dead end"). 
  
  - No page limit to appendix, but be practical. `R` output should be concise (don't print pages upon pages of output).
  
- **_All code and work on team Github repository_**. 

  - Be careful to push data if _large_ ( &gt; 1GB)
  
  - Thoughtful, informative commit messages. 
  
  - Even distribution of the workload across team members ("divide and conquer")
  
---

### Project Presentation

- Prepare a [slide presentation using R Markdown](https://rmarkdown.rstudio.com/lesson-11.html)

- **_12 minutes_** total (I will stop you); not all have to present, but all must be in front of class during presentation.

- **_6-15 slides_** in total, not including the title slide.

- Layout of the presentation should **_mirror the report_**

 - (1-3 slides) Problem statement and Background
 - (1-3 slides) Approach/Design
 - (1-3 slides) Methods/Tools
 - (2-4 slides) Results
 - (1-2 slides) Lessons learned/Next steps

- **_Submit_** rendered version of the slides to CANVAS. (All code for generating the slides on Github).

---

class: newsection

# Shiny

---

.pull-left[

&lt;br&gt;&lt;br&gt;

![:center_img](Figures/shiny_logo.png)
] 

.pull-right[

&lt;br&gt;&lt;br&gt;

- Build interactive web apps straight from R. 

- Use on website or within an R Markdown Page

- Advanced customization: CSS themes, html widgets, Java Script

- Useful for 

  - data exploration

  - Iterative presentation of results

]

---

### Building a Basic Application

![:space 5]

Install Package. Self-Contained but many supplementary packages are available that expand on the shiny functionality. 


```r
install.packages("shiny")
```


![:space 5]

Can quickly call and run an example. 

```r
library(shiny)
runExample("01_hello")
```


---

![:space 10]

![:center_img](Figures/shiny_example_1.png)

---

![:space 25]

![:center_img](Figures/shiny_example_2.png)

---

![:center_img 57](Figures/shiny_example_3.png)

---

![:space 40]

![:center_img](Figures/shiny_example_4.png)

---

![:space 25]

![:center_img](Figures/shiny_example_5.png)

---

![:space 10]

![:center_img](Figures/shiny_example_6.png)

---

### User Interface


```r
ui &lt;- fluidPage(

    # Application title
    titlePanel("Old Faithful Geyser Data"),

    # Sidebar with a slider input for number of bins
    sidebarLayout(
        sidebarPanel(
            sliderInput("bins",
                        "Number of bins:",
                        min = 1,
                        max = 50,
                        value = 30)
        ),

        # Show a plot of the generated distribution
        mainPanel(
           plotOutput("distPlot")
        )
    )
)
```


---

### Server

![:space 10]


```r
# Define server logic required to draw a histogram
server &lt;- function(input, output) {

    output$distPlot &lt;- renderPlot({
        # generate bins based on input$bins from ui.R
        x    &lt;- faithful[, 2]
        bins &lt;- seq(min(x), max(x), length.out = input$bins + 1)

        # draw the histogram with the specified number of bins
        hist(x, breaks = bins, col = 'darkgray', border = 'white')
    })
}
```

---

### Run Application

![:space 25]


```r
shinyApp(ui = ui, server = server)
```


---

### Reactivity: ![:text_color forestgreen](Inputs) 

![:center_img](Figures/inputs.png)

---

### Reactivity: ![:text_color forestgreen](Input) Types

![:center_img](Figures/input_types.png)

---

### Reactivity: ![:text_color forestgreen](Input) Syntax

![:space 10]

![:center_img](Figures/input_syntax.png)

---

### Reactivity: ![:text_color forestgreen](Inputs) and ![:text_color steelblue](Outputs)

![:center_img](Figures/outputs.png)

---

### Reactivity: ![:text_color steelblue](Output) Types

![:space 10]

.center[
|Function| Inserts|
|---------|------------|
| `dataTableOutput()` | an interactive table |
| `htmlOutput()` | raw HTML |
| `imageOutput()` | image |
| `plotOutput()` | plot |
| `tableOutput()` | table |
| `textOutput()` | text |
| `uiOutput()` | a Shiny UI element |
| `verbatimTextOutput()` | a Shiny UI element |
]

---

![:space 4]


```r
ui &lt;- fluidPage(

    # Application title
    titlePanel("Old Faithful Geyser Data"),

    # Sidebar with a slider input for number of bins
    sidebarLayout(
        sidebarPanel(
            sliderInput("bins",
                        "Number of bins:",
                        min = 1,
                        max = 50,
                        value = 30)
        ),

        # Show a plot of the generated distribution
        mainPanel(
*          plotOutput("distPlot")
        )
    )
)
```

---

![:space 15]


```r
# Define server logic required to draw a histogram
server &lt;- function(input, output) {

*   output$distPlot &lt;-
      renderPlot({ 
        # generate bins based on input$bins from ui.R
        x    &lt;- faithful[, 2]
        bins &lt;- seq(min(x), max(x), length.out = input$bins + 1)
        
        # draw the histogram with the specified number of bins
        hist(x, breaks = bins, col = 'darkgray', border = 'white')
      }) 
}
```

---

### Telling the server what to render

![:space 5]


```r
# Define server logic required to draw a histogram
server &lt;- function(input, output) {

    output$distPlot &lt;- 
*     renderPlot({
        # generate bins based on input$bins from ui.R
        x    &lt;- faithful[, 2]
        bins &lt;- seq(min(x), max(x), length.out = input$bins + 1)
        
        # draw the histogram with the specified number of bins
        hist(x, breaks = bins, col = 'darkgray', border = 'white')
      }) 
}
```

---

### Telling the server what to render

1. Save objects to display to `output$`

```r
server &lt;- function(input,output){
    output$hist &lt;- # code
}
```
.center[
**&amp;darr;**
]
```r
plotOuput("hist")
```

---

### Telling the server what to render

1. Save objects to display to `output$`

2. Build objects to display with `render&lt;Verb&gt;()`

```r
server &lt;- function(input,output){
    output$hist &lt;- renderPlot({
        # Code
    })
}
```

---

### Telling the server what to render

1. Save objects to display to `output$`

2. Build objects to display with `render&lt;Verb&gt;()`

.center[
| Function | Generates | 
|-------------|-----------------|
| `renderDataTable()` | An interactive table |
| `renderImage()` | An image |
| `renderPlot()` | A Plot |
| `renderPrint()` | A code block of printed output |
| `renderTable()` | A table |
| `renderText()` | A character string |
| `renderUI()` | A Shiny UI Element |
]

---

### Telling the server what to render

1. Save objects to display to `output$`

2. Build objects to display with `render&lt;Verb&gt;()`

3. Access Input values with `input$`


```r
server &lt;- function(input,output){
    output$hist &lt;- renderPlot({
*       hist(rnorm(input$num))
    })
}
```

---

### Telling the server what to render

1. Save objects to display to `output$`

2. Build objects to display with `render&lt;Verb&gt;()`

3. Access Input values with `input$`

&lt;br&gt;
![:center_img 75](Figures/input_values.png)

---

### Telling the server what to render

1. Save objects to display to `output$`

2. Build objects to display with `render&lt;Verb&gt;()`

3. Access Input values with `input$`

  - Input values automatically change when the user changes the input

![:center_img 50](Figures/input_values_2.png)

---

class: newsection

# Ethics

---

![:space 15]

.center[
**What are some ethical issues surrounding  the use of data?**
Provide Examples.
]

--

&lt;br&gt; &lt;br&gt; 

.center[
**For the causal user of data (e.g. an analyst) is data ethics an issue?** &lt;br&gt;&lt;br&gt; Or is are ethical concerns more of a "large companies" issue?
]

---

### "Good" Data Science

As data becomes more prominent, a common set of **ethics standards** and practices are beginning to emerge. 

 - [Association for Computing Machinery's Committee on Professional Ethics](https://ethics.acm.org/code-of-ethics/)
 
 - [American Statistical Association](https://www.amstat.org//ASA/Your-Career/Ethical-Guidelines-for-Statistical-Practice.aspx)
 
 - [UK Data Ethics Framework](https://www.gov.uk/government/publications/data-ethics-framework/data-ethics-framework)

--
 
&lt;br&gt;
 
Along with tougher **regulations** regarding data usage and management.

 - [General Data Protection Regulation (GDPR)](https://eugdpr.org/)

 - [California Consumer Privacy Act](https://hbr.org/2018/07/what-you-need-to-know-about-californias-new-data-privacy-law)


---

### Ethical Checklist for Data Projects

- Have we listed how this technology can be attacked or abused? 
- Have we tested our training data to ensure it is fair and representative? 
- Have we studied and understood possible sources of bias in our data?
- Does our team reflect diversity of opinions, backgrounds, and kinds of thought? 
- What kind of user consent do we need to collect to use the data? 
- Do we have a mechanism for gathering consent from users? 
- ave we explained clearly what users are consenting to?
- Do we have a mechanism for redress if people are harmed by the results? 
- Can we shut down this software in production if it is behaving badly? 
- Have we tested for fairness with respect to different user groups? 
- Have we tested for disparate error rates among different user groups? 
- Do we test and monitor for model drift to ensure our software remains fair over time? 
- Do we have a plan to protect and secure user data?

---

# The Five Cs

![:space 5]

.center[
### Consent
]


--

.center[
### Clarity
]

--

.center[
### Consistency &amp; Trust
]

--

.center[
### Control and Transparency
]

--

.center[
### Consequences
]

---

### Building Ethics into a Data-Driven Culture
&lt;br&gt;
- An individual needs to be empowered to stop the process before damage is done.

- Anyone should be able to escalate issues for remediation without fear of retaliation.

- An ethical challenge should be part of the hiring process.

- Product reviews must ask questions about the product’s impact.

- Teams must reflect diversity of thought, experiences, race, and background.

- Corporations must make their own principles clear.

---

.center[
## [Case Study: "Optimizing Schools"](https://aiethics.princeton.edu/wp-content/uploads/sites/587/2018/10/Princeton-AI-Ethics-Case-Study-3.pdf)
]

&lt;img src="week-12-Ethics-ppol670_files/figure-html/unnamed-chunk-10-1.png" style="display: block; margin: auto;" /&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"countIncrementalSlides": false,
"highlightLines": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
